<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Little Girl and Maximum XOR | False Productivity</title>
<meta name="keywords" content="math, bitwise operations" />
<meta name="description" content="Codeforces - Little Girl and Maximum XOR (276D) solution">
<meta name="author" content="colossal_pepe">
<link rel="canonical" href="https://colossal-pepe.github.io/false-productivity/posts/2021-6/little-girl-and-maximum-xor/" />
<link crossorigin="anonymous" href="/false-productivity/assets/css/stylesheet.min.b50dea21cb69b925c783abc4870e38fef3e55317f404eef2740034ed7a1c0ac5.css" integrity="sha256-tQ3qIctpuSXHg6vEhw44/vPlUxf0BO7ydAA07XocCsU=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://colossal-pepe.github.io/false-productivity/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://colossal-pepe.github.io/false-productivity/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://colossal-pepe.github.io/false-productivity/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://colossal-pepe.github.io/false-productivity/apple-touch-icon.png">
<link rel="mask-icon" href="https://colossal-pepe.github.io/false-productivity/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.83.1" />

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js" integrity="sha384-YNHdsYkH6gMx9y3mRkmcJ2mFUjTd0qNQQvY9VYZgQd7DcN7env35GzlmFaZ23JGp" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          
          throwOnError : false
        });
    });
</script>
<meta property="og:title" content="Little Girl and Maximum XOR" />
<meta property="og:description" content="Codeforces - Little Girl and Maximum XOR (276D) solution" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://colossal-pepe.github.io/false-productivity/posts/2021-6/little-girl-and-maximum-xor/" /><meta property="og:image" content="https://colossal-pepe.github.io/false-productivity/papermod-cover.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-07T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2021-06-07T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://colossal-pepe.github.io/false-productivity/papermod-cover.png"/>

<meta name="twitter:title" content="Little Girl and Maximum XOR"/>
<meta name="twitter:description" content="Codeforces - Little Girl and Maximum XOR (276D) solution"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://colossal-pepe.github.io/false-productivity/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Little Girl and Maximum XOR",
      "item": "https://colossal-pepe.github.io/false-productivity/posts/2021-6/little-girl-and-maximum-xor/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Little Girl and Maximum XOR",
  "name": "Little Girl and Maximum XOR",
  "description": "Codeforces - Little Girl and Maximum XOR (276D) solution",
  "keywords": [
    "math", "bitwise operations"
  ],
  "articleBody": "Abridged Problem Statement Given a two natural numbers, $l$ and $r$, output the maximum value of $a \\oplus b$ where $a$ and $b$ are any integers in the range $[l,r]$.\nSolution We don’t give a shit about how any numbers look in base-10 so I will start writing out everything in base-2. Let’s make a few observations:\n  Since $l \\leq r$, if we turn on any bits in $r$ (turning on means make a bit 1 which was initially 0 and turning off is of course the opposite), we go over the range. Similarly, if we turn off any bits in $l$, we go under the range. Let’s say we get $a$ and $b$ from transforming $l$ and $r$ respectively. This means that we get $a$ by turning on some bits in $l$ (we can turn on no bits of course) and we get $b$ by turning off some bits in $r$ (again, we can choose to turn off no bits).\n  Now the question is which bits do we want to turn off in $r$ and which ones do we want to turn on in $l$. This we can figure out with an example. Let’s take this as an example: $$ l = 001101001 \\\\[0.5em] r = 001110110 $$ Here, notice that we can’t alter the 4 bits from the left. This is because if we turn on some bit in $l$ in the left 4 positions, we get $l  r$ which we can’t have. Similarly, if we turn off a bit in $r$ in the left 4 positions, we get $r  Now, notice the bit most significant bit where $r$ has 1 but $l$ has 0. If we XOR this bit, we already get 1 so we want to keep it as it is. Which means now we only need to worry about the other bits on the right. Now, if we turn on all the bits to the right in $l$ and turn off all the bits to the right in $r$, we get our $a$ and $b$. Of course, some bits we couldn’t change (the 4 leftest bits) and the ones we could change, we changed them in such a way so that XORing every bit gives a 1. From point (1), its easy to see that $a$ and $b$ are still in range.\n  From the example, our solutions will look like this: $$ \\begin{align*} a=001101111 \\\\[0.3em] b=001110000 \\\\[0.3em] a \\oplus b = 000011111 \\end{align*} $$ Let’s say that $i$ is the most significant bit where $r$ is 1 but $l$ is 0 ($i \\geq 0$). In this case, $i = 4$. Since all bits $j$ such that $j \\leq i$ are turned on in $a \\oplus b$, we simply want to find $2^{i+1} - 1$. We can get $i$ using the formula: $i = \\lfloor \\log_2 (l \\oplus r) \\rfloor$ where $\\lfloor x \\rfloor$ is the floor function. That formula works because the $i^{\\text{th}}$ bit will be the most significant bit if we XOR $l$ and $r$. Then the answer is simply $2^{\\lfloor \\log_2 (l \\oplus r) \\rfloor} - 1$.\nCode Time complexity: $\\mathcal{O}(1)$\n#include using namespace std; long long l, r; long long log2(long long a) { long long x = 0; while (a) { x++; a /= 2; } return x-1; } long long pow2(long long a) { long long x = 1; while (a) { x *= 2; a--; } return x; } int main() { cin  l  r; cout  (l == r ? 0 : pow2(log2(l^r) + 1) - 1)  endl; return 0; } ",
  "wordCount" : "620",
  "inLanguage": "en",
  "datePublished": "2021-06-07T00:00:00Z",
  "dateModified": "2021-06-07T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "colossal_pepe"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://colossal-pepe.github.io/false-productivity/posts/2021-6/little-girl-and-maximum-xor/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "False Productivity",
    "logo": {
      "@type": "ImageObject",
      "url": "https://colossal-pepe.github.io/false-productivity/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://colossal-pepe.github.io/false-productivity/" accesskey="h" title="False Productivity (Alt + H)">False Productivity</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://colossal-pepe.github.io/false-productivity/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://colossal-pepe.github.io/false-productivity/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://colossal-pepe.github.io/false-productivity/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://colossal-pepe.github.io/false-productivity/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Little Girl and Maximum XOR
    </h1>
    <div class="post-description">
      Codeforces - Little Girl and Maximum XOR (276D) solution
    </div>
    <div class="post-meta">June 7, 2021&nbsp;·&nbsp;colossal_pepe
</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <div class="details">Table of Contents</div>
        </summary>
        <div class="inner"><ul>
                <li>
                    <a href="#abridged-problem-statement" aria-label="Abridged Problem Statement">Abridged Problem Statement</a></li>
                <li>
                    <a href="#solution" aria-label="Solution">Solution</a></li>
                <li>
                    <a href="#code" aria-label="Code">Code</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="abridged-problem-statement">Abridged Problem Statement<a hidden class="anchor" aria-hidden="true" href="#abridged-problem-statement">#</a></h2>
<p>Given a two natural numbers, $l$ and $r$, output the maximum value of $a \oplus b$ where $a$ and $b$ are any integers in the range $[l,r]$.</p>
<h2 id="solution">Solution<a hidden class="anchor" aria-hidden="true" href="#solution">#</a></h2>
<p>We don&rsquo;t give a shit about how any numbers look in base-10 so I will start writing out everything in base-2. Let&rsquo;s make a few observations:</p>
<ol>
<li>
<p>Since $l \leq r$, if we turn on any bits in $r$ (turning on means make a bit 1 which was initially 0 and turning off is of course the opposite), we go over the range. Similarly, if we turn off any bits in $l$, we go under the range. Let&rsquo;s say we get $a$ and $b$ from transforming $l$ and $r$ respectively. This means that we get $a$ by turning on some bits in $l$ (we can turn on no bits of course) and we get $b$ by turning off some bits in $r$ (again, we can choose to turn off no bits).</p>
</li>
<li>
<p>Now the question is which bits do we want to turn off in $r$ and which ones do we want to turn on in $l$. This we can figure out with an example. Let&rsquo;s take this as an example:
$$
l = 001101001 \\[0.5em]
r = 001110110
$$
Here, notice that we can&rsquo;t alter the 4 bits from the left. This is because if we turn on some bit in $l$ in the left 4 positions, we get $l &gt; r$ which we can&rsquo;t have. Similarly, if we turn off a bit in $r$ in the left 4 positions, we get $r &lt; l$ which, again, we can&rsquo;t have. So we must start altering bits from somewhere so that the inequality $l \leq r$ holds.</p>
</li>
<li>
<p>Now, notice the bit most significant bit where $r$ has 1 but $l$ has 0. If we XOR this bit, we already get 1 so we want to keep it as it is. Which means now we only need to worry about the other bits on the right. Now, if we turn on all the bits to the right in $l$ and turn off all the bits to the right in $r$, we get our $a$ and $b$. Of course, some bits we couldn&rsquo;t change (the 4 leftest bits) and the ones we could change, we changed them in such a way so that XORing every bit gives a 1. From point (1), its easy to see that $a$ and $b$ are still in range.</p>
</li>
</ol>
<p>From the example, our solutions will look like this:
$$
\begin{align*}
a=001101111 \\[0.3em]
b=001110000 \\[0.3em]
a \oplus b = 000011111
\end{align*}
$$
Let&rsquo;s say that $i$ is the most significant bit where $r$ is 1 but $l$ is 0 ($i \geq 0$). In this case, $i = 4$. Since all bits $j$ such that $j \leq i$ are turned on in $a \oplus b$, we simply want to find $2^{i+1} - 1$. We can get $i$ using the formula: $i = \lfloor \log_2 (l \oplus r) \rfloor$ where $\lfloor x \rfloor$ is the <code>floor</code> function. That formula works because the $i^{\text{th}}$ bit will be the most significant bit if we XOR $l$ and $r$. Then the answer is simply $2^{\lfloor \log_2 (l \oplus r) \rfloor} - 1$.</p>
<h2 id="code">Code<a hidden class="anchor" aria-hidden="true" href="#code">#</a></h2>
<p>Time complexity: $\mathcal{O}(1)$</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">long</span> <span style="color:#66d9ef">long</span> l, r;

<span style="color:#66d9ef">long</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">log2</span>(<span style="color:#66d9ef">long</span> <span style="color:#66d9ef">long</span> a) {
    <span style="color:#66d9ef">long</span> <span style="color:#66d9ef">long</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">while</span> (a) {
        x<span style="color:#f92672">++</span>;
        a <span style="color:#f92672">/=</span> <span style="color:#ae81ff">2</span>;
    }
    <span style="color:#66d9ef">return</span> x<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
}

<span style="color:#66d9ef">long</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">pow2</span>(<span style="color:#66d9ef">long</span> <span style="color:#66d9ef">long</span> a) {
    <span style="color:#66d9ef">long</span> <span style="color:#66d9ef">long</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">while</span> (a) {
        x <span style="color:#f92672">*=</span> <span style="color:#ae81ff">2</span>;
        a<span style="color:#f92672">--</span>;
    }
    <span style="color:#66d9ef">return</span> x;
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
    cin <span style="color:#f92672">&gt;&gt;</span> l <span style="color:#f92672">&gt;&gt;</span> r;
    cout <span style="color:#f92672">&lt;&lt;</span> (l <span style="color:#f92672">==</span> r <span style="color:#f92672">?</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">:</span> pow2(log2(l<span style="color:#f92672">^</span>r) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">&lt;&lt;</span> endl;
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div>
</div>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://colossal-pepe.github.io/false-productivity/tags/math/">math</a></li>
      <li><a href="https://colossal-pepe.github.io/false-productivity/tags/bitwise-operations/">bitwise operations</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://colossal-pepe.github.io/false-productivity/posts/2021-6/product-1-modulo-n/">
    <span class="title">« Prev Page</span>
    <br>
    <span>Product 1 Modulo N</span>
  </a>
  <a class="next" href="https://colossal-pepe.github.io/false-productivity/posts/2021-6/kavi-on-pairing-duty/">
    <span class="title">Next Page »</span>
    <br>
    <span>Kavi on Pairing Duty</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    <footer class="footer">
    <span>&copy; 2021 <a href="https://colossal-pepe.github.io/false-productivity/">False Productivity</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
