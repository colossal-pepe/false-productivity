<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Baby Ehab Partitions Again | False Productivity</title>
<meta name="keywords" content="dynamic programming, math" />
<meta name="description" content="Codeforces - Baby Ehab Partitions Again (1516C) solution">
<meta name="author" content="colossal_pepe">
<link rel="canonical" href="https://colossal-pepe.github.io/false-productivity/posts/2021-6/baby-ehab-partitions-again/" />
<link crossorigin="anonymous" href="/false-productivity/assets/css/stylesheet.min.b50dea21cb69b925c783abc4870e38fef3e55317f404eef2740034ed7a1c0ac5.css" integrity="sha256-tQ3qIctpuSXHg6vEhw44/vPlUxf0BO7ydAA07XocCsU=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://colossal-pepe.github.io/false-productivity/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://colossal-pepe.github.io/false-productivity/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://colossal-pepe.github.io/false-productivity/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://colossal-pepe.github.io/false-productivity/apple-touch-icon.png">
<link rel="mask-icon" href="https://colossal-pepe.github.io/false-productivity/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.84.3" />

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js" integrity="sha384-YNHdsYkH6gMx9y3mRkmcJ2mFUjTd0qNQQvY9VYZgQd7DcN7env35GzlmFaZ23JGp" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          
          throwOnError : false
        });
    });
</script>
<meta property="og:title" content="Baby Ehab Partitions Again" />
<meta property="og:description" content="Codeforces - Baby Ehab Partitions Again (1516C) solution" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://colossal-pepe.github.io/false-productivity/posts/2021-6/baby-ehab-partitions-again/" /><meta property="og:image" content="https://colossal-pepe.github.io/false-productivity/papermod-cover.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-04T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2021-06-04T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://colossal-pepe.github.io/false-productivity/papermod-cover.png"/>

<meta name="twitter:title" content="Baby Ehab Partitions Again"/>
<meta name="twitter:description" content="Codeforces - Baby Ehab Partitions Again (1516C) solution"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://colossal-pepe.github.io/false-productivity/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Baby Ehab Partitions Again",
      "item": "https://colossal-pepe.github.io/false-productivity/posts/2021-6/baby-ehab-partitions-again/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Baby Ehab Partitions Again",
  "name": "Baby Ehab Partitions Again",
  "description": "Codeforces - Baby Ehab Partitions Again (1516C) solution",
  "keywords": [
    "dynamic programming", "math"
  ],
  "articleBody": "Abridged Problem Statement Given an array of $a$ of length $n$, determine how many elements and which elements should be removed from $a$ so that the following condition does not hold:\n$a$ can be separated into 2 subsequences $b$ and $c$ containing distinct elements, such that $|b| + |c| = |a|$ and $\\sum_{i = 1}^{|b|} b_i = \\sum_{j = 1}^{|c|} c_j$. Here, $|x|$ denotes the length of the array $x$.\nSolution Let’s first tackle the case of 0 removals. Well we can just check for this using DP. I won’t discuss this case here because then this post will become too long. Refer to this or this to see a very similar problem’s solution. Now, the more interesting case is where we do need to remove elements. Assume I am talking about the case for more than 0 removals for the rest of this post. Let $S_a = \\sum_{i = 1}^{|a|} a_i$. It’s obvious that $S_a$ must be even. For $S_a$ to be even, $a$ must contain an even number of odd elements. Let’s again separate the problem into 2 cases:\n  $a$ contains greater than 0 odd elements\nWe can simply remove one odd element and we will be done. Since now $a$ will contain an odd number of odd elements, $S_a$ will be odd too.\n  $a$ contains 0 odd elements\nInstead of isolating this case, let’s try to arrive at this from case 1. Let’s say $a$ does contain more than 0 odd elements for now. Let the “bad” subsequences be $b$ and $c$ ($S_b + S_c = S_a$). Since we are still at case 1 (for now), we can still just remove any odd element. Now let’s multiply every element in $a$ by 2, hence finally arriving at the 2nd case. But notice that $b$ and $c$ will still contain the same elements (just multiplied by 2). And we can multiply by 2 however many times we want, but $b$ and $c$ will still contain the same elements. Which means we can remove the odd element and we are done.\n  So we’ve proven that either 0 or 1 element needs to be removed. In the first case, it’s obvious which element needs to be removed but in the second case, how do we decide that? Well we should find the element which is closest to being odd, meaning it has the least powers of 2 in its prime factorization. And that is pretty easy to do.\nCode Time complexity: $\\mathcal{O}\\left( n \\cdot \\sum_{i = 1}^{n} a_i \\right)$. Since it’s a table with empty cells, that stuff just becomes max value of $n$ which is $100$ times max value of the sum which is $2000 \\cdot 100$.\n#include using namespace std; int n, total = 0, arr[105]; bool dp[105][200005]; void fillDP() { for (int i = 0; i  n; i++) { dp[i][0] = 1; for (int j = 0; j  200005; j++) { if (not dp[i][j]) continue; dp[i + 1][j] = 1, dp[i + 1][j + arr[i]] = 1; } } } int lsb(int x) { int ans = 0; while (x%2 == 0) { ans += 1; x /= 2; } return ans; } int main() { cin  n; for (int i = 0; i  n; i++) { cin  arr[i]; total += arr[i]; } fillDP(); if (total%2 or not dp[n][total/2]) { cout  0  endl; } else { cout  1  endl; int ans = 0; for (int i = 0; i  n; i++) { if (lsb(arr[i])  lsb(arr[ans])) ans = i; } cout  ans + 1  endl; } return 0; } ",
  "wordCount" : "604",
  "inLanguage": "en",
  "datePublished": "2021-06-04T00:00:00Z",
  "dateModified": "2021-06-04T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "colossal_pepe"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://colossal-pepe.github.io/false-productivity/posts/2021-6/baby-ehab-partitions-again/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "False Productivity",
    "logo": {
      "@type": "ImageObject",
      "url": "https://colossal-pepe.github.io/false-productivity/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://colossal-pepe.github.io/false-productivity/" accesskey="h" title="False Productivity (Alt + H)">False Productivity</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://colossal-pepe.github.io/false-productivity/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://colossal-pepe.github.io/false-productivity/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://colossal-pepe.github.io/false-productivity/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://colossal-pepe.github.io/false-productivity/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Baby Ehab Partitions Again
    </h1>
    <div class="post-description">
      Codeforces - Baby Ehab Partitions Again (1516C) solution
    </div>
    <div class="post-meta">June 4, 2021&nbsp;·&nbsp;colossal_pepe
</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <div class="details">Table of Contents</div>
        </summary>
        <div class="inner"><ul>
                <li>
                    <a href="#abridged-problem-statement" aria-label="Abridged Problem Statement">Abridged Problem Statement</a></li>
                <li>
                    <a href="#solution" aria-label="Solution">Solution</a></li>
                <li>
                    <a href="#code" aria-label="Code">Code</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="abridged-problem-statement">Abridged Problem Statement<a hidden class="anchor" aria-hidden="true" href="#abridged-problem-statement">#</a></h2>
<p>Given an array of $a$ of length $n$, determine how many elements and which elements should be removed from $a$ so that the following condition does <strong>not</strong> hold:</p>
<p>$a$ can be separated into 2 subsequences $b$ and $c$ containing distinct elements, such that $|b| + |c| = |a|$ and $\sum_{i = 1}^{|b|} b_i = \sum_{j = 1}^{|c|} c_j$. Here, $|x|$ denotes the length of the array $x$.</p>
<h2 id="solution">Solution<a hidden class="anchor" aria-hidden="true" href="#solution">#</a></h2>
<p>Let&rsquo;s first tackle the case of 0 removals. Well we can just check for this using DP. I won&rsquo;t discuss this case here because then this post will become too long. Refer to <a href="https://en.wikipedia.org/wiki/Knapsack_problem">this</a> or <a href="https://www.geeksforgeeks.org/0-1-knapsack-problem-dp-10/">this</a> to see a very similar problem&rsquo;s solution. Now, the more interesting case is where we do need to remove elements. Assume I am talking about the case for more than 0 removals for the rest of this post. Let $S_a = \sum_{i = 1}^{|a|} a_i$. It&rsquo;s obvious that $S_a$ must be even. For $S_a$ to be even, $a$ must contain an even number of odd elements. Let&rsquo;s again separate the problem into 2 cases:</p>
<ol>
<li>
<p>$a$ contains greater than 0 odd elements</p>
<p>We can simply remove one odd element and we will be done. Since now $a$ will contain an odd number of odd elements, $S_a$ will be odd too.</p>
</li>
<li>
<p>$a$ contains 0 odd elements</p>
<p>Instead of isolating this case, let&rsquo;s try to arrive at this from case 1. Let&rsquo;s say $a$ <strong>does</strong> contain more than 0 odd elements for now. Let the &ldquo;bad&rdquo; subsequences be $b$ and $c$ ($S_b + S_c = S_a$). Since we are still at case 1 (for now), we can still just remove any odd element. Now let&rsquo;s multiply every element in $a$ by 2, hence finally arriving at the 2nd case. But notice that $b$ and $c$ will still contain the same elements (just multiplied by 2). And we can multiply by 2 however many times we want, but $b$ and $c$ will still contain the same elements. Which means we can remove the odd element and we are done.</p>
</li>
</ol>
<p>So we&rsquo;ve proven that either 0 or 1 element needs to be removed. In the first case, it&rsquo;s obvious which element needs to be removed but in the second case, how do we decide that? Well we should find the element which is closest to being odd, meaning it has the least powers of 2 in its prime factorization. And that is pretty easy to do.</p>
<h2 id="code">Code<a hidden class="anchor" aria-hidden="true" href="#code">#</a></h2>
<p>Time complexity: $\mathcal{O}\left( n \cdot \sum_{i = 1}^{n} a_i \right)$. Since it&rsquo;s a table with empty cells, that stuff just becomes max value of $n$ which is $100$ times max value of the sum which is $2000 \cdot 100$.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">int</span> n, total <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, arr[<span style="color:#ae81ff">105</span>];
<span style="color:#66d9ef">bool</span> dp[<span style="color:#ae81ff">105</span>][<span style="color:#ae81ff">200005</span>];

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fillDP</span>() {
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> n; i<span style="color:#f92672">++</span>) {
        dp[i][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">200005</span>; j<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">if</span> (not dp[i][j]) <span style="color:#66d9ef">continue</span>;
            dp[i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>][j] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, dp[i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>][j <span style="color:#f92672">+</span> arr[i]] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
        }
    }
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">lsb</span>(<span style="color:#66d9ef">int</span> x) {
    <span style="color:#66d9ef">int</span> ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">while</span> (x<span style="color:#f92672">%</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
        ans <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>;
        x <span style="color:#f92672">/=</span> <span style="color:#ae81ff">2</span>;
    }
    <span style="color:#66d9ef">return</span> ans;
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
    cin <span style="color:#f92672">&gt;&gt;</span> n;
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> n; i<span style="color:#f92672">++</span>) {
        cin <span style="color:#f92672">&gt;&gt;</span> arr[i];
        total <span style="color:#f92672">+=</span> arr[i];
    }
    fillDP();
    <span style="color:#66d9ef">if</span> (total<span style="color:#f92672">%</span><span style="color:#ae81ff">2</span> or not dp[n][total<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>]) {
        cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&lt;&lt;</span> endl;
    } <span style="color:#66d9ef">else</span> {
        cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;&lt;</span> endl;
        <span style="color:#66d9ef">int</span> ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> n; i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">if</span> (lsb(arr[i]) <span style="color:#f92672">&lt;</span> lsb(arr[ans])) ans <span style="color:#f92672">=</span> i;
        }
        cout <span style="color:#f92672">&lt;&lt;</span> ans <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;&lt;</span> endl;
    }
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div>
</div>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://colossal-pepe.github.io/false-productivity/tags/dynamic-programming/">dynamic programming</a></li>
      <li><a href="https://colossal-pepe.github.io/false-productivity/tags/math/">math</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://colossal-pepe.github.io/false-productivity/posts/2021-6/product-1-modulo-n/">
    <span class="title">« Prev Page</span>
    <br>
    <span>Product 1 Modulo N</span>
  </a>
  <a class="next" href="https://colossal-pepe.github.io/false-productivity/posts/2021-6/kavi-on-pairing-duty/">
    <span class="title">Next Page »</span>
    <br>
    <span>Kavi on Pairing Duty</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    <footer class="footer">
    <span>&copy; 2021 <a href="https://colossal-pepe.github.io/false-productivity/">False Productivity</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
